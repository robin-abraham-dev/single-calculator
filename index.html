<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partner Earnings Calculator (Single)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f10;
            background-image:
                repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(255,255,255,0.02) 40px, rgba(255,255,255,0.02) 42px),
                repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.02) 40px, rgba(255,255,255,0.02) 42px);
            min-height: 100vh; padding: 24px; color: #fff;
        }
        .container { max-width: 820px; margin: 0 auto; }
        .card {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 18px; padding: 28px; backdrop-filter: blur(10px);
        }
        .top-bar { display:flex; align-items:center; justify-content:space-between; margin-bottom: 18px; }
        .title { font-weight: 700; letter-spacing: 0.02em; font-size: 1.2rem; color:#c9cde4; }
        .partner-select { display:flex; align-items:center; gap:8px; opacity:0.55; transition: opacity .2s ease; }
        .partner-select:hover { opacity:0.9; }
        .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
        .gear { font-size:1rem; color:#8f93a8; user-select:none; }
        select {
            background: transparent; color:#9aa0b6; border:none;
            padding:6px 8px; border-radius:8px; font-weight:600; font-size:.9rem;
            outline: none; appearance: none; -webkit-appearance: none; cursor: pointer;
        }
        select:focus { outline: 1px dashed rgba(255,255,255,0.3); }

        .grid { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
        .input-group { margin-bottom: 16px; }
        .input-group label { display:block; font-size:0.9rem; color:#fff; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.04em; }
        .input-wrapper{ position:relative; }
        .currency { position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#fff; pointer-events:none; }
        input[type="number"].text {
            width:100%; padding:12px 14px; background:#1b1c22; border:1px solid rgba(255,255,255,0.18); border-radius:10px; color:#fff;
        }
        .currency-input { padding-left:34px !important; }

        .inline-slider { display:flex; align-items:center; gap:12px; }
        .num-box { width:90px; background:#1b1c22; border:1px solid rgba(255,255,255,0.18); border-radius:10px; color:#fff; padding:10px; text-align:center; font-weight:600; }
        input[type="range"].thin { -webkit-appearance:none; appearance:none; height:6px; flex:1; border-radius:3px; background:rgba(255,255,255,0.2); outline:none; }
        input[type="range"].thin::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.3); }
        input[type="range"].thin::-moz-range-thumb { width:18px; height:18px; border-radius:50%; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.3); border:none; }

        .btn { width:100%; padding:14px; border-radius:50px; background:#333; border:1px solid #575757; color:#fff; font-weight:700; letter-spacing:0.06em; cursor:pointer; margin-top:6px; }
        .btn:hover{ background:#444; }

        .results { display:none; margin-top:16px; }
        .results.show { display:block; }
        .result-box { background:#1b1c22; border:1px solid rgba(255,255,255,0.18); border-radius:14px; padding:22px; text-align:center; }
        .result-title { color:#a0a8c0; text-transform:uppercase; font-size:0.9rem; letter-spacing:0.06em; margin-bottom:8px; }
        .result-value { font-size:2.2rem; font-weight:700; }
        .sub { color:#a0a8c0; font-size:0.85rem; margin-top:8px; }

        .current { background: rgba(57,60,80,0.6); border:1px solid rgba(120,122,160,0.35); border-radius:14px; padding:18px; margin-top:16px; }
        .current h4 { text-align:center; color:#c9cde4; margin-bottom:12px; }
        .current input { width:100%; background:#212229; border:1px solid rgba(120,122,160,0.35); border-radius:12px; padding:14px 18px; color:#d9dbe6; font-size:1.4rem; font-weight:700; text-align:center; }

        .dots{ display:inline-flex; gap:6px; }
        .dots span{ width:6px; height:6px; background:#fff; border-radius:50%; animation:bounce 1s infinite ease-in-out; opacity:.6; }
        .dots span:nth-child(2){ animation-delay:.15s; }
        .dots span:nth-child(3){ animation-delay:.3s; }
        @keyframes bounce{0%,80%,100%{transform:translateY(0);opacity:.5;}40%{transform:translateY(-6px);opacity:1;}}

        @media (max-width: 700px){ .grid{ grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="top-bar">
                <div class="title">Partner Earnings Calculator</div>
                <div class="partner-select" title="Preferences">
                    <span class="gear">⚙︎</span>
                    <label class="sr-only" for="partnerShare">Partner Share</label>
                    <select id="partnerShare" aria-label="Partner Share">
                        <option value="0.20">20%</option>
                        <option value="0.25">25%</option>
                        <option value="0.30">30%</option>
                        <option value="0.35">35%</option>
                        <option value="0.40">40%</option>
                    </select>
                </div>
            </div>

            <div class="grid">
                <div>
                    <div class="input-group">
                        <label for="clients">Number of Trading Clients</label>
                        <input type="number" id="clients" class="text" min="1" value="100" placeholder="Enter number of clients">
                    </div>
                    <div class="input-group">
                        <label for="capital">Average Capital per Client</label>
                        <div class="input-wrapper">
                            <span class="currency">₹</span>
                            <input type="number" id="capital" class="text currency-input" min="1" value="5000" placeholder="Enter average capital">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="input-group">
                        <label for="leverage">Average Leverage Used</label>
                        <div class="inline-slider">
                            <input type="range" id="leverageRange" class="thin" min="0" max="100" value="27">
                            <input type="number" id="leverage" class="num-box" min="0" max="100" value="27">
                            <span>x</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="trades">Trades per Client per Month</label>
                        <div class="inline-slider">
                            <input type="range" id="tradesRange" class="thin" min="1" max="100" value="25">
                            <input type="number" id="trades" class="num-box" min="1" max="100" value="25">
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn" onclick="calculate()">Calculate Earnings</button>

            <div class="results" id="results">
                <div class="result-box">
                    <div class="result-title">Monthly Earnings (Partner Revenue Share)</div>
                    <div class="result-value" id="earnings"></div>
                    <div class="sub">Trading fee 0.05% - Partner Share <span id="shareText">20%</span></div>
                </div>
            </div>

            <div class="current">
                <h4>Current Earnings</h4>
                <input type="text" id="currentEarnings" placeholder="₹0">
            </div>
        </div>
    </div>

    <script>
        const TRADING_FEE_RATE = 0.0005;

        function syncControls(){
            const lr = document.getElementById('leverageRange');
            const ln = document.getElementById('leverage');
            const tr = document.getElementById('tradesRange');
            const tn = document.getElementById('trades');
            lr.addEventListener('input', ()=> ln.value = lr.value);
            ln.addEventListener('input', ()=> lr.value = ln.value);
            tr.addEventListener('input', ()=> tn.value = tr.value);
            tn.addEventListener('input', ()=> tr.value = tn.value);
        }

        function inr(n){ return '₹' + Number(n).toLocaleString('en-IN', { maximumFractionDigits: 0 }); }
        function inrInputFormat(v){ const d=v.replace(/[^0-9]/g,''); if(!d) return ''; return '₹'+ Number(d).toLocaleString('en-IN'); }

        function bindCurrent(){
            const el = document.getElementById('currentEarnings');
            el.addEventListener('input', function(){ this.value = inrInputFormat(this.value); });
            el.addEventListener('blur', function(){ this.value = inrInputFormat(this.value); });
        }

        function calculate(){
            const clients = parseFloat(document.getElementById('clients').value);
            const capital = parseFloat(document.getElementById('capital').value);
            const leverage = parseFloat(document.getElementById('leverage').value);
            const trades = parseFloat(document.getElementById('trades').value);
            const share = parseFloat(document.getElementById('partnerShare').value);

            if(!clients || clients<=0){ alert('Please enter a valid number of clients'); return; }
            if(!capital || capital<=0){ alert('Please enter a valid average capital per client'); return; }

            const totalCapital = clients * capital;
            const effective = totalCapital * leverage;
            const monthlyVolume = effective * trades;
            const totalFees = monthlyVolume * TRADING_FEE_RATE;
            const earnings = totalFees * share;

            const res = document.getElementById('results');
            const out = document.getElementById('earnings');
            const shareText = document.getElementById('shareText');

            res.classList.add('show');
            out.innerHTML = '<span class="dots"><span></span><span></span><span></span></span>';
            shareText.textContent = Math.round(share*100) + '%';
            setTimeout(()=>{ out.textContent = inr(earnings); }, 1500);
        }

        document.addEventListener('DOMContentLoaded', ()=>{ syncControls(); bindCurrent(); });
    </script>
</body>
</html>
